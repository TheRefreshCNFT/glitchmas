!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style>body{margin:0;overflow:hidden;background-color:#000}canvas{display:block;touch-action:none}.modal{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#111;padding:20px;border-radius:10px;border:1px solid #333;display:grid;grid-template-columns:repeat(4,1fr);gap:10px;box-shadow:0 0 20px rgba(255,215,0,.2);z-index:10}.modal button{padding:10px;background:#000;color:gold;border:1px solid #333;font-weight:700;cursor:pointer;box-shadow:0 0 5px rgba(255,215,0,.2);font-family:monospace}.modal button:hover{background:#222}</style></head><body><canvas id="patternCanvas"></canvas>
<script>
    const canvas=document.getElementById("patternCanvas"),ctx=canvas.getContext("2d");canvas.width=window.innerWidth,canvas.height=window.innerHeight;const shapes=[],numShapes=5,maxOverlapRatio=.6;let globalTime=0;const colors=["hsl(180, 100%, 70%)","hsl(200, 100%, 70%)","hsl(220, 100%, 80%)","hsl(280, 100%, 75%)","hsl(320, 100%, 70%)","hsl(0, 0%, 90%)","hsl(150, 100%, 80%)","hsl(250, 100%, 85%)"];function normalizeVector(a){const t=Math.hypot(a.x,a.y);return{x:a.x/t,y:a.y/t}}const noiseSeed=new Float32Array(512);for(let a=0;a<512;a++)noiseSeed[a]=Math.random();function noise(a){const t=Math.abs(a),e=Math.floor(t)%512,s=t-Math.floor(t),n=s*s*(3-2*s);return lerp(noiseSeed[e],noiseSeed[(e+1)%512],n)}function lerp(a,t,e){return a+(t-a)*e}function getVisualRadius(a){const t=a.radius+30,e=Math.cos(a.rotX),s=1.3*Math.sin(a.rotY),n=Math.max(.2,Math.abs(e)),i=1+a.rotationAxis.x*s,o=a.rotationAxis.y*s,h=a.rotationAxis.x*s,r=i*n,c=(1+a.rotationAxis.y*s)*n,d=r*r+h*h+o*o+c*c,l=r*r+h*h-o*o-c*c,u=r*o+h*c;return t*Math.sqrt((d+Math.sqrt(l*l+4*u*u))/2)}function initializeShapes(){shapes.length=0;const a=Math.min(canvas.width,canvas.height)/2.5;let t=0;for(;shapes.length<5&&t<2e3;){const e=.3*a,s=Math.random()*(a-e)+e,n=[5,6,7,8,9,12,16,20],i=n[Math.floor(Math.random()*n.length)],o=Math.floor(Math.random()*(i/2-1))+2,h=Math.floor(2*Math.random()),r=canvas.width-2*s,c=canvas.height-2*s,d=r>0?Math.random()*r+s:canvas.width/2,l=c>0?Math.random()*c+s:canvas.height/2,u={baseX:d,baseY:l,x:d,y:l,radius:s,symmetry:i,step:o,patternType:h,spikeFactor:.5*Math.random()+.5,twistFactor:.1*(Math.random()-.5),phase:Math.random()*Math.PI*2,lineDensity:Math.floor(25*Math.random())+25,color:colors[Math.floor(Math.random()*colors.length)],timeOffset:1e3*Math.random(),walkSpeedMult:.5*Math.random()+.5,walkRangeMult:.5*Math.random()+.75,rotX:.5*(Math.random()-.5),rotY:.5*(Math.random()-.5),velX:0,velY:0,rotationAxis:normalizeVector({x:Math.random()-.5,y:Math.random()-.5})},m=0+u.timeOffset,M=.25*canvas.width*u.walkRangeMult,v=.4*m*u.walkSpeedMult;let x=u.baseX+(Math.sin(v)*M+Math.cos(.3*v)*(.3*M)),p=u.baseY+Math.cos(.7*v)*(.15*M);x-u.radius<0&&(x=u.radius),x+u.radius>canvas.width&&(x=canvas.width-u.radius),p-u.radius<0&&(p=u.radius),p+u.radius>canvas.height&&(p=canvas.height-u.radius),u.x=x,u.y=p;let g=!0;for(let a of shapes){const t=a.x-u.x,e=a.y-u.y,s=Math.hypot(t,e),n=getVisualRadius(a),i=getVisualRadius(u);if(s<n+i-.6*Math.min(n,i)){g=!1;break}}g&&shapes.push(u),t++}}function updateShapes(){for(let a of shapes){const t=globalTime+a.timeOffset,e=.25*canvas.width*a.walkRangeMult,s=.4*t*a.walkSpeedMult,n=Math.sin(s)*e+Math.cos(.3*s)*(.3*e),i=Math.cos(.7*s)*(.15*e);let o=a.baseX+n,h=a.baseY+i;o-a.radius<0&&(o=a.radius),o+a.radius>canvas.width&&(o=canvas.width-a.radius),h-a.radius<0&&(h=a.radius),h+a.radius>canvas.height&&(h=canvas.height-a.radius),a.x=o,a.y=h;let r=0;r=noise(.1*t)>.35?.002:1e-4;const c=-a.rotX*r,d=-a.rotY*r,l=.0045*(Math.random()-.5),u=.0045*(Math.random()-.5);a.velX+=c+l,a.velY+=d+u,a.velX*=.94,a.velY*=.94,a.rotX+=a.velX,a.rotY+=a.velY,a.phase+=.002}for(let a=0;a<shapes.length;a++)for(let t=a+1;t<shapes.length;t++){const e=shapes[a],s=shapes[t],n=getVisualRadius(e),i=getVisualRadius(s),o=n+i-.6*Math.min(n,i);let h=s.x-e.x,r=s.y-e.y,c=Math.hypot(h,r);if(0===c&&(h=.001*(Math.random()-.5),r=.001*(Math.random()-.5),c=Math.hypot(h,r)),c<o){const a=.5*(o-c),t=h/c,n=r/c;e.x-=t*a,e.y-=n*a,s.x+=t*a,s.y+=n*a,e.baseX-=t*a,e.baseY-=n*a,s.baseX+=t*a,s.baseY+=n*a,e.baseX-e.radius<0&&(e.baseX=e.radius),e.baseX+e.radius>canvas.width&&(e.baseX=canvas.width-e.radius),e.baseY-e.radius<0&&(e.baseY=e.radius),e.baseY+e.radius>canvas.height&&(e.baseY=canvas.height-e.radius),s.baseX-s.radius<0&&(s.baseX=s.radius),s.baseX+s.radius>canvas.width&&(s.baseX=canvas.width-s.radius),s.baseY-s.radius<0&&(s.baseY=s.radius),s.baseY+s.radius>canvas.height&&(s.baseY=canvas.height-s.radius),e.x-e.radius<0&&(e.x=e.radius),e.x+e.radius>canvas.width&&(e.x=canvas.width-e.radius),e.y-e.radius<0&&(e.y=e.radius),e.y+e.radius>canvas.height&&(e.y=canvas.height-e.radius),s.x-s.radius<0&&(s.x=s.radius),s.x+s.radius>canvas.width&&(s.x=canvas.width-s.radius),s.y-s.radius<0&&(s.y=s.radius),s.y+s.radius>canvas.height&&(s.y=canvas.height-s.radius)}}}function drawShape(a){const{x:t,y:e,radius:s,symmetry:n,step:i,patternType:o,spikeFactor:h,twistFactor:r,phase:c,lineDensity:d,color:l,rotX:u,rotY:m,rotationAxis:M}=a;ctx.save(),ctx.translate(t,e);const v=Math.cos(u),x=1.3*Math.sin(m),p=Math.max(.2,Math.abs(v)),g=1+M.x*x,y=M.y*x,f=M.x*x,w=1+M.y*x;ctx.transform(g*p,y,f,w*p,0,0),ctx.lineWidth=1.25;for(let t=0;t<d;t++){const e=t/d,l=noise(.15*t+.1*(globalTime+a.timeOffset)),u=s*(1-.85*e)+20*l+10*Math.sin(.5*(globalTime+a.timeOffset)+.05*t),m=.8*(1-e)+.15,M=Math.floor(180+75*l);ctx.strokeStyle=`rgba(${M}, ${M}, ${M}, ${m})`,ctx.beginPath();const v=[];if(0===o)for(let a=0;a<n;a++){const e=2*Math.PI/n*a+c+.015*t;v.push({x:Math.cos(e)*u,y:Math.sin(e)*u})}else if(1===o)for(let a=0;a<2*n;a++){const e=2*Math.PI/(2*n)*a+c+.015*t,s=a%2==0?u:u*h;v.push({x:Math.cos(e)*s,y:Math.sin(e)*s})}else if(2===o)for(let a=0;a<n;a++){const e=t*r,s=2*Math.PI/n*a+c+e;v.push({x:Math.cos(s)*u,y:Math.sin(s)*u})}if(0===o)for(let a=0;a<v.length;a++){const t=v[a],e=v[(a+2)%v.length];ctx.moveTo(t.x,t.y),ctx.lineTo(e.x,e.y)}else for(let a=0;a<v.length;a++){const t=v[a],e=v[(a+i)%v.length];ctx.moveTo(t.x,t.y),ctx.lineTo(e.x,e.y)}ctx.stroke()}ctx.fillStyle=l,ctx.globalAlpha=.07,ctx.beginPath(),ctx.arc(0,0,.25*s,0,2*Math.PI),ctx.fill(),ctx.restore()}function animate(){ctx.clearRect(0,0,canvas.width,canvas.height),updateShapes();for(let a of shapes)drawShape(a);globalTime+=.005,requestAnimationFrame(animate)}let tapTimer;initializeShapes(),animate(),window.addEventListener("resize",()=>{canvas.width=window.innerWidth,canvas.height=window.innerHeight,initializeShapes()});let lastTapTime=0;function showModal(){const a=document.createElement("div");a.className="modal",a&&(a.style.background="#000",a.style.boxShadow="0 0 10px hsl(310, 100%, 50%)"),["1k","2k","3k","4k","8k","16k"].forEach(t=>{const e=document.createElement("button");e.textContent=t,e.onclick=()=>{document.body.removeChild(a),scaleCanvas(parseInt(t),t.includes("t"))},a.appendChild(e),e&&(e.style.background="#000",e.style.color="hsl(310, 100%, 50%)",e.style.boxShadow="0 0 10px hsl(310, 100%, 50%)")}),document.body.appendChild(a)}function scaleCanvas(a,t){const e=1024*a,s=e*(canvas.width/canvas.height),n=document.createElement("canvas"),i=n.getContext("2d");n.width=s,n.height=e,t||(i.fillStyle="#000000",i.fillRect(0,0,s,e));const o=e/canvas.height,h=canvas.width*o,r=canvas.height*o,c=(s-h)/2,d=(e-r)/2;i.drawImage(canvas,c,d,h,r);const l=document.createElement("a");l.download=`MerryGlitchmas_${a}k.png`,l.href=n.toDataURL("image/png"),l.click()}document.getElementById("patternCanvas").addEventListener("click",a=>{const t=(new Date).getTime(),e=t-lastTapTime;clearTimeout(tapTimer),e<275&&e>0?(showModal(),a.preventDefault()):tapTimer=setTimeout(()=>{location.reload()},300),lastTapTime=t});
</script></body></html>
